extends layout
block content
  script(src='/javascripts/diff_match_patch.js')
  script(src='/javascripts/jquery.pretty-text-diff.min.js')
  script(src='/javascripts/jquery.dataTables.min.js')
  script(src='/javascripts/dataTables.semanticui.min.js')
  script(src='https://cdn.datatables.net/buttons/1.4.2/js/dataTables.buttons.min.js')
  script(src='https://cdn.datatables.net/buttons/1.4.2/js/buttons.semanticui.min.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js')
  script(src='//cdn.datatables.net/buttons/1.4.2/js/buttons.html5.min.js')
  script(src='//cdn.datatables.net/buttons/1.4.2/js/buttons.print.min.js')
  script(src='//cdn.datatables.net/buttons/1.4.2/js/buttons.colVis.min.js')
  script.
    $(document).ready(function(){
      $("#wrapper tr").prettyTextDiff({cleanup:true});
      var table = $('table').DataTable({
        paging: false,
        stateSave: true,
        buttons: [ 'copy', 'excel', 'print', 'colvis' ]
      });
      table.buttons().container().appendTo($('div.eight.column:eq(0)', table.table().container()));
      var idColumn = table.column(0);
      idColumn.visible(false);
    });

  link(rel='stylesheet', href='/stylesheets/dataTables.semanticui.min.css')
  link(rel='stylesheet', href='https://cdn.datatables.net/buttons/1.4.2/css/buttons.semanticui.min.css')
  style(type='text/css',media='screen').
    .original, .changed, .diff, .distance {font-family: 'PT Mono', monospace;}
    ins {text-decoration: none; background-color: #ccff00}
    del {text-decoration: line-through; color:red; #background-color: #ee8080}
  style(type='text/css', class='init').
  br
  br
  #file-compare
    .ui.middle.aligned.center.aligned.container
      .ui.six.statistics
        .orange.statistic
          .value #{total}
          .label segments
        .yellow.statistic
          .value #{faults}
          .label corrected
        .green.statistic
          .value #{trivial}
          .label trivial
        .teal.statistic
          .value #{minor}
          .label minor
        .blue.statistic
          .value #{major}
          .label major
        .violet.statistic
          .value #{critical}
          .label critical
    br
    br
    .ui.middle.aligned.center.aligned.container#wrapper
      table.ui.celled.teal.table
        thead
          tr
            th Segment id
            th Machine Translated
            th Post-edited
            th Difference
            th Distance
            th Comments
        tbody
          for thing in data
            tr
              td.id #{thing.id}
              td.original #{thing.original}
              td.changed #{thing.changed}
              td.diff
              td.distance #{thing.score}
              td(contenteditable='true', width='200px')
  br
  br
